<!DOCTYPE html>
<html>
<head>
    <title>AR –ó–≤–µ—Ä–∏ –≤ Telegram</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <style>
        body { 
            margin: 0; 
            overflow: hidden; 
            background: #000;
            color: white;
            font-family: Arial;
        }
        #arOverlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: none;
            z-index: 1000;
        }
        #instructions {
            padding: 20px;
            text-align: center;
        }
    </style>
    <script src="https://cdn.babylonjs.com/babylon.js"></script>
</head>
<body>
    <canvas id="renderCanvas"></canvas>
    <div id="arOverlay">
        <div id="instructions">
            <h2>üîç AR –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ Telegram</h2>
            <p>–î–ª—è –∏–≥—Ä—ã –≤ AR:</p>
            <ol>
                <li>–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "‚Ä¢‚Ä¢‚Ä¢" –≤ –ø—Ä–∞–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É</li>
                <li>–í—ã–±–µ—Ä–∏—Ç–µ "–û—Ç–∫—Ä—ã—Ç—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ"</li>
                <li>–†–∞–∑—Ä–µ—à–∏—Ç–µ –¥–æ—Å—Ç—É–ø –∫ –∫–∞–º–µ—Ä–µ</li>
            </ol>
            <button onclick="location.reload()">üîÑ –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É</button>
        </div>
    </div>

    <script>
        class ARGame {
            constructor() {
                this.canvas = document.getElementById('renderCanvas');
                this.arOverlay = document.getElementById('arOverlay');
                this.init();
            }

            async init() {
                try {
                    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–æ–¥–¥–µ—Ä–∂–∫—É WebXR
                    const isARSupported = await this.checkARSupport();
                    
                    if (isARSupported && navigator.mediaDevices) {
                        await this.startAR();
                    } else {
                        this.showARInstructions();
                    }
                } catch (error) {
                    this.showARInstructions();
                }
            }

            async checkARSupport() {
                return navigator.xr && 
                    await navigator.xr.isSessionSupported('immersive-ar');
            }

            async startAR() {
                // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Babylon.js
                const engine = new BABYLON.Engine(this.canvas, true);
                const scene = new BABYLON.Scene(engine);
                
                // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ AR –∫–∞–º–µ—Ä—ã
                const xr = await scene.createDefaultXRExperienceAsync({
                    uiOptions: {
                        sessionMode: "immersive-ar",
                        referenceSpaceType: "local-floor"
                    }
                });

                // –°–æ–∑–¥–∞–µ–º AR-–æ–±—ä–µ–∫—Ç—ã
                this.createARContent(scene);

                engine.runRenderLoop(() => scene.render());
            }

            createARContent(scene) {
                // –ü—Ä–∏–º–µ—Ä: –≤—Ä–∞—â–∞—é—â–∏–π—Å—è –∫—É–±
                const box = BABYLON.MeshBuilder.CreateBox("arBox", { size: 0.5 }, scene);
                box.position.y = 1.5;
                
                scene.onBeforeRenderObservable.add(() => {
                    box.rotation.y += 0.02;
                });
            }

            showARInstructions() {
                this.arOverlay.style.display = "block";
                this.canvas.style.display = "none";
            }
        }

        // –ó–∞–ø—É—Å–∫ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        window.addEventListener('load', () => new ARGame());
    </script>
</body>
</html>
